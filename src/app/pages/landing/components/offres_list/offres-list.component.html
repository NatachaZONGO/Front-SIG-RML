<topbar-widget></topbar-widget>

<!-- Hero Section -->
<section class="hero-section">
  <div class="hero-background">
    <div class="hero-overlay"></div>
    <div class="hero-image">
<picture class="hero-picture">
  <!-- (optionnel) version WebP pour perf -->
  <source srcset="assets/images/offres.jpg" type="image/jpg" />
  <img
    src="assets/images/offres.jpg"
    alt="offres"
    class="hero-img"
    loading="eager"
    decoding="async"
  />
</picture>

    </div>
  </div>
  
  <div class="hero-content">
    <div class="hero-text">
      <h1 class="hero-title">Explorez toutes nos offres</h1>
      <p class="hero-subtitle">
        Découvrez des centaines d'opportunités d'emploi dans tous les secteurs. 
        Trouvez le poste qui correspond parfaitement à votre profil et à vos aspirations professionnelles.
      </p>
      <div class="hero-stats">
        <div class="stat-item">
          <span class="stat-number">{{ total() }}</span>
          <span class="stat-label">Offres disponibles</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">50+</span>
          <span class="stat-label">Entreprises partenaires</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">15+</span>
          <span class="stat-label">Secteurs d'activité</span>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Main Content -->
<div class="main-content">
  <!-- Search Section -->
  <div class="search-section">
    <div class="search-container">
      <h2 class="search-title">Trouvez votre emploi idéal</h2>
      <p class="search-subtitle">Utilisez notre barre de recherche pour filtrer les offres selon vos critères</p>
      
      <div class="search-bar">
        <div class="search-input-container">
          <i class="pi pi-search search-icon"></i>
          <input 
            pInputText 
            type="text" 
            [(ngModel)]="q" 
            placeholder="Rechercher par titre, entreprise, ville..." 
            class="search-input"
          />
        </div>
        <button pButton icon="pi pi-filter-slash" class="clear-btn" (click)="clear()" pTooltip="Effacer les filtres"></button>
      </div>
    </div>
  </div>

  <!-- Results Section -->
  <div class="results-section">
    <div class="results-header">
      <h3 class="results-title">Résultats de recherche</h3>
      <div class="results-count">
        <i class="pi pi-briefcase"></i>
        <span>{{ total() }} offre(s) trouvée(s)</span>
      </div>
    </div>

    <!-- Job Cards Grid -->
    <div class="jobs-grid">
      <div *ngFor="let o of pageRows()" class="job-card">
        <div class="card-ribbon" *ngIf="isFeatured(o)">
          <span>★ Vedette</span>
        </div>
        
        <div class="card-header">
          <div class="job-info">
            <h4 class="job-title" [title]="o.titre">{{ o.titre }}</h4>
            <div class="job-company">
              <i class="pi pi-building"></i>
              <span>{{ o.entreprise?.nom_entreprise || 'Entreprise' }}</span>
            </div>
            <div class="job-location">
              <i class="pi pi-map-marker"></i>
              <span>{{ o.localisation || '—' }}</span>
            </div>
          </div>

          <div class="job-badges">
            <span class="contract-badge" 
                  [ngClass]="{
                    'cdi': o.type_contrat?.toLowerCase() === 'cdi',
                    'cdd': o.type_contrat?.toLowerCase() === 'cdd', 
                    'freelance': o.type_contrat?.toLowerCase() === 'freelance',
                    'stage': o.type_contrat?.toLowerCase() === 'stage'
                  }">
              {{ o.type_contrat || '-' }}
            </span>
          </div>
        </div>

        <div class="card-body">
          <p class="job-description">{{ plain(o.description || '') }}</p>
        </div>

        <div class="card-footer">
          <div class="job-meta">
            <div class="publish-date" *ngIf="o.date_publication">
              <i class="pi pi-calendar"></i>
              <span>{{ $any(o.date_publication) | date:'mediumDate' }}</span>
            </div>
          </div>
          <button 
            pButton 
            pRipple 
            label="Voir plus" 
            class="view-job-btn" 
            [rounded]="true" 
            (click)="openOffreDetails(o)"
          ></button>
        </div>
      </div>
    </div>

    <!-- Pagination -->
    <div class="pagination-section">
      <p-paginator
        [rows]="rows"
        [totalRecords]="filtered().length"
        (onPageChange)="onPage($event)"
        [rowsPerPageOptions]="[6,9,12,18]"
        styleClass="custom-paginator">
      </p-paginator>
    </div>
  </div>
</div>

<!-- Empty State -->
<div class="empty-state" *ngIf="total() === 0">
  <div class="empty-content">
    <i class="pi pi-search empty-icon"></i>
    <h3 class="empty-title">Aucune offre trouvée</h3>
    <p class="empty-message">Essayez de modifier vos critères de recherche ou consultez toutes nos offres disponibles.</p>
    <button pButton label="Réinitialiser la recherche" [rounded]="true" class="reset-btn" (click)="clear()"></button>
  </div>
</div>

<!-- ======== DÉTAIL OFFRE ======== -->
<p-dialog
  [(visible)]="detailsVisible"
  [modal]="true"
  [draggable]="false"
  [resizable]="false"
  [dismissableMask]="true"
  [style]="{ width: '900px', maxWidth: '95vw' }"
  [breakpoints]="{ '960px': '95vw', '640px': '100vw' }"
  [header]="selectedOffre?.titre || 'Détail de l\'offre'">

  <ng-container *ngIf="selectedOffre as d">
    <div class="space-y-3">
      <div class="text-gray-600 text-sm">
        {{ d.entreprise?.nom_entreprise || 'Entreprise' }} • {{ d.localisation || '—' }}
      </div>

      <div class="flex flex-wrap gap-2">
        <p-tag *ngIf="d.type_contrat" [value]="d.type_contrat"></p-tag>
        <p-tag *ngIf="$any(d.categorie)?.nom || d.categorie" [value]="$any(d.categorie)?.nom ?? (typeof d.categorie === 'string' ? d.categorie : '')"></p-tag>
        <p-tag *ngIf="d.experience" [value]="d.experience"></p-tag>
        <p-tag *ngIf="d.salaire" [value]="d.salaire + ' CFA'"></p-tag>
        <p-tag *ngIf="isFeatured(d)" value="Vedette" severity="warn"></p-tag>
      </div>

      <div class="offer-html" [innerHTML]="d.description || ''"></div>

      <div class="details-footer">
        <button pButton pRipple label="Postuler" icon="pi pi-send" (click)="postuler(d)"></button>
      </div>
    </div>
  </ng-container>
</p-dialog>

<!-- ======== POSTULER ======== -->
<p-dialog
  [(visible)]="applyVisible"
  [modal]="true"
  [draggable]="false"
  [resizable]="false"
  [dismissableMask]="true"
  [style]="{ width: '760px', maxWidth: '95vw' }"
  [breakpoints]="{ '960px': '95vw', '640px': '100vw' }"
  [header]="'Postuler — ' + (selectedOffre?.titre || '')">

  <form #applyForm="ngForm" class="apply-form" (ngSubmit)="submitApplication(applyForm)" novalidate>
    <!-- Nom / Prénom -->
    <div class="row two">
      <div class="field">
        <label>Nom *</label>
        <input pInputText name="nom" [(ngModel)]="apply.nom" required [readonly]="isAuth" />
      </div>
      <div class="field">
        <label>Prénom *</label>
        <input pInputText name="prenom" [(ngModel)]="apply.prenom" required [readonly]="isAuth" />
      </div>
    </div>

    <!-- Email -->
    <div class="row">
      <div class="field">
        <label>Email *</label>
        <input pInputText type="email" name="email" [(ngModel)]="apply.email" required email [readonly]="isAuth" />
        <small class="muted" *ngIf="!isAuth">
          Vous avez déjà un compte ? <a (click)="goLogin()" style="cursor:pointer;">Se connecter</a>
        </small>
      </div>
    </div>

    <!-- Ville + Date de naissance (requis pour invités) -->
    <div class="row two">
      <div class="field">
        <label>Ville *</label>
        <input
          pInputText
          name="ville"
          [(ngModel)]="apply.ville"
          [required]="!isAuth"
          autocomplete="address-level2"
          placeholder="Ex: Ouagadougou"
          [readonly]="isAuth"
          #villeModel="ngModel"
        />
        <small class="text-red-500" *ngIf="!isAuth && villeModel.invalid && (villeModel.dirty || applyForm.submitted)">
          La ville est obligatoire.
        </small>
      </div>

      <div class="field" *ngIf="!isAuth">
        <label>Date de naissance *</label>
        <input
          pInputText
          type="date"
          name="date_naissance"
          [(ngModel)]="apply.date_naissance"
          [required]="!isAuth"
          [attr.max]="today"
          #dobModel="ngModel"
        />
        <small class="text-red-500" *ngIf="dobModel.invalid && (dobModel.dirty || applyForm.submitted)">
          La date de naissance est obligatoire.
        </small>
      </div>
    </div>

    <!-- Sexe (invité) -->
    <div class="row" *ngIf="!isAuth">
      <div class="field">
        <label>Sexe</label>
        <div class="flex items-center gap-3 flex-wrap">
          <p-radioButton name="sexe" inputId="sxM" value="M" [(ngModel)]="apply.sexe"></p-radioButton>
          <label for="sxM">Homme</label>

          <p-radioButton name="sexe" inputId="sxF" value="F" [(ngModel)]="apply.sexe"></p-radioButton>
          <label for="sxF">Femme</label>

          <p-radioButton name="sexe" inputId="sxX" value="X" [(ngModel)]="apply.sexe"></p-radioButton>
          <label for="sxX">Autre / Préfère ne pas dire</label>
        </div>
      </div>
    </div>

    <!-- Niveau d'étude (invité) -->
    <div class="row" *ngIf="!isAuth">
      <div class="field">
        <label>Niveau d'étude</label>
        <p-select
          name="niveau_etude"
          [(ngModel)]="apply.niveau_etude"
          [options]="niveauEtudeOptions"
          optionLabel="label"
          optionValue="value"
          placeholder="Sélectionner"
          [style]="{ width: '100%' }"
        ></p-select>
      </div>
    </div>

    <!-- Disponibilité (invité) -->
    <div class="row" *ngIf="!isAuth">
      <div class="field">
        <label>Disponibilité</label>
        <div class="flex items-center gap-3 flex-wrap">
          <p-radioButton name="disponibilite" inputId="dispNow" value="immediate" [(ngModel)]="apply.disponibilite"></p-radioButton>
          <label for="dispNow">Immédiate</label>

          <p-radioButton name="disponibilite" inputId="disp1w" value="sous_1_semaine" [(ngModel)]="apply.disponibilite"></p-radioButton>
          <label for="disp1w">Sous 1 semaine</label>

          <p-radioButton name="disponibilite" inputId="disp2w" value="sous_2_semaines" [(ngModel)]="apply.disponibilite"></p-radioButton>
          <label for="disp2w">Sous 2 semaines</label>

          <p-radioButton name="disponibilite" inputId="disp1m" value="sous_1_mois" [(ngModel)]="apply.disponibilite"></p-radioButton>
          <label for="disp1m">Sous 1 mois</label>

          <p-radioButton name="disponibilite" inputId="dispOther" value="autre" [(ngModel)]="apply.disponibilite"></p-radioButton>
          <label for="dispOther">Autre</label>

          <input *ngIf="apply.disponibilite === 'autre'" pInputText name="disponibilite_autre" [(ngModel)]="apply.disponibilite_autre" placeholder="Ex: début octobre" style="min-width: 220px;" />
        </div>
        <small class="muted">Choisissez une option. Si "Autre", précisez un court texte.</small>
      </div>
    </div>

    <!-- Téléphone -->
    <div class="row">
      <div class="field">
        <label>Numéro de téléphone</label>
        <input pInputText name="phone" [(ngModel)]="apply.phone" placeholder="+226 70 00 00 00" [readonly]="isAuth" />
      </div>
    </div>

    <!-- Pays + Expérience -->
    <div class="row two">
      <div class="field">
        <label>Pays</label>
        <p-select
          name="pays"
          [(ngModel)]="apply.pays"
          [options]="paysOptions"
          optionLabel="label"
          optionValue="value"
          placeholder="Sélectionner"
          [filter]="true"
          [virtualScroll]="true"
          [virtualScrollItemSize]="38"
          [style]="{ width: '100%' }">
          <ng-template pTemplate="selectedItem" let-opt>
            <div class="flex items-center gap-2" *ngIf="opt">
              <img *ngIf="opt.flag" [src]="opt.flag" alt="" width="20" height="14" style="border-radius: 2px; border: 1px solid #e5e7eb" />
              <span>{{ opt.label }}</span>
              <small class="text-gray-500 ml-1">{{ opt.code }}</small>
            </div>
            <span *ngIf="!opt" class="text-gray-400">Sélectionner</span>
          </ng-template>

          <ng-template pTemplate="item" let-opt>
            <div class="flex items-center gap-2">
              <img *ngIf="opt.flag" [src]="opt.flag" alt="" width="20" height="14" style="border-radius: 2px; border: 1px solid #e5e7eb" />
              <span>{{ opt.label }}</span>
              <small class="text-gray-500 ml-2">{{ opt.code }}</small>
            </div>
          </ng-template>
        </p-select>
      </div>

      <div class="field">
        <label>Années d'expérience</label>
        <p-inputNumber name="experience" [(ngModel)]="apply.experience" [min]="0" [max]="60" [useGrouping]="false" [style]="{ width: '100%' }"></p-inputNumber>
      </div>
    </div>

    <!-- CV -->
    <div class="row">
      <label class="block font-medium mb-1">CV</label>
      <div class="flex items-center gap-3 flex-wrap">
        <p-radioButton name="cvChoice" inputId="cvExisting" value="existing" [(ngModel)]="apply.cvChoice" [disabled]="!isAuth"></p-radioButton>
        <label for="cvExisting">Utiliser mon CV existant</label>

        <p-radioButton name="cvChoice" inputId="cvUpload" value="upload" [(ngModel)]="apply.cvChoice"></p-radioButton>
        <label for="cvUpload">Téléverser un CV</label>

        <input *ngIf="apply.cvChoice === 'upload'" type="file" accept=".pdf,.doc,.docx" (change)="onApplyFile($event)" />
      </div>
      <small class="muted">PDF ou DOC, 5 Mo max.</small>
    </div>

    <!-- Lettre de motivation -->
    <div class="row">
      <div class="field">
        <label>Lettre de motivation</label>

        <div class="flex items-center gap-3 flex-wrap mb-2">
          <p-radioButton name="lmChoice" inputId="lmText" value="text" [(ngModel)]="apply.lmChoice"></p-radioButton>
          <label for="lmText">Saisir du texte</label>

          <p-radioButton name="lmChoice" inputId="lmUpload" value="upload" [(ngModel)]="apply.lmChoice"></p-radioButton>
          <label for="lmUpload">Téléverser un fichier</label>
        </div>

        <textarea *ngIf="apply.lmChoice === 'text'" pTextarea name="motivation" [(ngModel)]="apply.motivation" rows="5" autoResize="true" placeholder="Expliquez brièvement pourquoi vous êtes un bon candidat"></textarea>

        <div *ngIf="apply.lmChoice === 'upload'">
          <input type="file" accept=".pdf,.doc,.docx,.txt,.odt" (change)="onApplyLmFile($event)" />
          <small class="muted block mt-1">PDF, DOC, DOCX, TXT ou ODT — 5 Mo max.</small>
        </div>
      </div>
    </div>

    <!-- Revue -->
    <div class="row">
      <p-checkbox inputId="reviewNow" name="reviewNow" binary="true" [(ngModel)]="apply.reviewNow"></p-checkbox>
      <label for="reviewNow" class="ml-2">Vérifier ma candidature maintenant</label>
    </div>

    <div class="footer">
      <button pButton type="button" class="p-button-text" label="Annuler" (click)="applyVisible=false"></button>
      <button
        pButton
        type="submit"
        icon="pi pi-send"
        label="Envoyer ma candidature"
        [disabled]="
          applyForm.invalid ||
          (!isAuth && !apply.ville?.trim()) ||
          (apply.cvChoice==='upload' && !cvFile)
        ">
      </button>
    </div>
  </form>
</p-dialog>

<!-- Styles -->
<style>
  /* ===== VARIABLES CSS ===== */
  :root {
    --primary-blue: #111d9d;
    --accent-orange: #ff7104;
    --success-green: #0a6c34;
    --text-dark: #1e293b;
    --text-medium: #64748b;
    --text-light: #94a3b8;
    --bg-light: #f8fafc;
    --border-light: #e2e8f0;
    --white: #ffffff;
  }

  /* ===== HERO SECTION ===== */
  .hero-section {
    position: relative;
    height: 400px;
    display: flex;
    align-items: center;
    overflow: hidden;
    background: linear-gradient(135deg, var(--bg-light) 0%, var(--white) 100%);
  }

  .hero-background {
    position: absolute;
    inset: 0;
    z-index: 1;
  }

  .hero-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(17, 29, 157, 0.05) 0%, rgba(10, 108, 52, 0.05) 100%);
    z-index: 2;
  }

  .hero-image {
    position: absolute;
    right: 0;
    top: 0;
    width: 50%;
    height: 100%;
    z-index: 1;
  }

  .placeholder-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .hero-content {
    position: relative;
    z-index: 3;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 2rem;
    width: 100%;
  }

  .hero-text {
    max-width: 50%;
  }

  .hero-title {
    font-size: 3rem;
    font-weight: 800;
    color: var(--primary-blue);
    margin-bottom: 1rem;
    line-height: 1.1;
  }

  .hero-subtitle {
    font-size: 1.125rem;
    color: var(--text-medium);
    line-height: 1.6;
    margin-bottom: 2rem;
  }

  .hero-stats {
    display: flex;
    gap: 2rem;
    flex-wrap: wrap;
  }

  .stat-item {
    text-align: center;
  }

  .stat-number {
    display: block;
    font-size: 2rem;
    font-weight: 700;
    color: var(--accent-orange);
    line-height: 1;
  }

  .stat-label {
    font-size: 0.875rem;
    color: var(--text-medium);
    font-weight: 500;
  }

  /* ===== MAIN CONTENT ===== */
  .main-content {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1.5rem;
  }

  /* ===== SEARCH SECTION ===== */
  .search-section {
    padding: 3rem 0;
    background: var(--white);
  }

  .search-container {
    text-align: center;
    max-width: 800px;
    margin: 0 auto;
  }

  .search-title {
    font-size: 2rem;
    font-weight: 700;
    color: var(--text-dark);
    margin-bottom: 0.5rem;
  }

  .search-subtitle {
    font-size: 1rem;
    color: var(--text-medium);
    margin-bottom: 2rem;
  }

  .search-bar {
    display: flex;
    gap: 1rem;
    align-items: center;
    justify-content: center;
    flex-wrap: wrap;
  }

  .search-input-container {
    position: relative;
    flex: 1;
    max-width: 500px;
  }

  .search-icon {
    position: absolute;
    left: 1rem;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-light);
    z-index: 2;
  }

  .search-input {
    width: 100% !important;
    padding: 0.875rem 1rem 0.875rem 3rem !important;
    border: 2px solid var(--border-light) !important;
    border-radius: 0.75rem !important;
    font-size: 1rem !important;
    transition: all 0.3s ease !important;
  }

  .search-input:focus {
    border-color: var(--primary-blue) !important;
    box-shadow: 0 0 0 3px rgba(17, 29, 157, 0.1) !important;
  }

  .clear-btn {
    background: var(--bg-light) !important;
    color: var(--text-medium) !important;
    border: 2px solid var(--border-light) !important;
    border-radius: 0.75rem !important;
    padding: 0.875rem !important;
    transition: all 0.3s ease !important;
  }

  .clear-btn:hover {
    background: var(--primary-blue) !important;
    color: var(--white) !important;
    border-color: var(--primary-blue) !important;
  }

  /* ===== RESULTS SECTION ===== */
  .results-section {
    padding: 2rem 0;
  }

  .results-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    flex-wrap: wrap;
    gap: 1rem;
  }

  .results-title {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--text-dark);
    margin: 0;
  }

  .results-count {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-medium);
    font-weight: 500;
  }

  .results-count i {
    color: var(--primary-blue);
  }

  /* ===== JOBS GRID ===== */
  .jobs-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.5rem;
    margin-bottom: 2rem;
  }

  @media (min-width: 640px) {
    .jobs-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .jobs-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  /* ===== JOB CARDS ===== */
  .job-card {
    background: var(--white);
    border: 2px solid var(--border-light);
    border-radius: 1rem;
    padding: 1.5rem;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
  }

  .job-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.12);
    border-color: var(--primary-blue);
  }

  .card-ribbon {
    position: absolute;
    top: 1rem;
    right: -2rem;
    background: linear-gradient(45deg, #dc2626 0%, #b91c1c 100%);
    color: white;
    padding: 0.35rem 2.5rem;
    font-size: 0.8rem;
    font-weight: 800;
    transform: rotate(45deg);
    transform-origin: center;
    box-shadow: 0 3px 12px rgba(220, 38, 38, 0.4);
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
    z-index: 10;
    border: 1px solid rgba(255, 255, 255, 0.2);
    letter-spacing: 0.5px;
  }

  /* Style spécial pour les cartes vedettes */
  .job-card:has(.card-ribbon) {
    border-color: var(--accent-orange);
    background: linear-gradient(135deg, #fff 0%, #fff8f0 100%);
    position: relative;
  }

  .job-card:has(.card-ribbon)::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--accent-orange) 0%, #f59e0b 100%);
    border-radius: 1rem 1rem 0 0;
  }

  .job-card:has(.card-ribbon):hover {
    border-color: var(--accent-orange);
    box-shadow: 0 12px 32px rgba(255, 113, 4, 0.15);
  }

  .card-header {
    margin-bottom: 1rem;
  }

  .job-info {
    margin-bottom: 1rem;
  }

  .job-title {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--text-dark);
    margin: 0 0 0.5rem 0;
    line-height: 1.4;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    overflow: hidden;
  }

  .job-company,
  .job-location {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    color: var(--text-medium);
    margin-bottom: 0.25rem;
  }

  .job-company i,
  .job-location i {
    color: var(--primary-blue);
    font-size: 0.75rem;
  }

  .job-badges {
    display: flex;
    justify-content: flex-end;
  }

  .contract-badge {
    font-size: 0.75rem;
    padding: 0.25rem 0.75rem;
    border-radius: 1rem;
    font-weight: 500;
    white-space: nowrap;
  }

  /* Contract Badge Colors */
  .contract-badge.cdi {
    background-color: #dcfce7;
    color: #166534;
  }

  .contract-badge.cdd {
    background-color: #fef3c7;
    color: #92400e;
  }

  .contract-badge.freelance {
    background-color: #e0e7ff;
    color: #3730a3;
  }

  .contract-badge.stage {
    background-color: #fce7f3;
    color: #be185d;
  }

  .contract-badge {
    background-color: #f1f5f9;
    color: var(--text-medium);
  }

  .card-body {
    margin-bottom: 1rem;
  }

  .job-description {
    font-size: 0.875rem;
    color: var(--text-medium);
    line-height: 1.5;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 3;
    line-clamp: 3;
    overflow: hidden;
  }

  .card-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .job-meta .publish-date {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.75rem;
    color: var(--text-light);
  }

  .job-meta i {
    color: var(--primary-blue);
  }

  .view-job-btn {
    background-color: var(--primary-blue) !important;
    border-color: var(--primary-blue) !important;
    color: var(--white) !important;
    font-size: 0.875rem !important;
    padding: 0.5rem 1.25rem !important;
    transition: all 0.3s ease !important;
  }

  .view-job-btn:hover {
    background-color: #0d1784 !important;
    border-color: #0d1784 !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 12px rgba(17, 29, 157, 0.3) !important;
  }

  /* ===== PAGINATION ===== */
  .pagination-section {
    padding: 2rem 0;
    border-top: 1px solid var(--border-light);
  }

  /* ===== EMPTY STATE ===== */
  .empty-state {
    padding: 4rem 2rem;
    text-align: center;
  }

  .empty-content {
    max-width: 400px;
    margin: 0 auto;
  }

  .empty-icon {
    font-size: 4rem;
    color: var(--text-light);
    margin-bottom: 1rem;
  }

  .empty-title {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--text-dark);
    margin-bottom: 0.5rem;
  }

  .empty-message {
    color: var(--text-medium);
    margin-bottom: 2rem;
    line-height: 1.5;
  }

  .reset-btn {
    background-color: var(--primary-blue) !important;
    border-color: var(--primary-blue) !important;
    color: var(--white) !important;
  }

  /* ===== RESPONSIVE ===== */
  @media (max-width: 768px) {
    .hero-text {
      max-width: 100%;
    }

    .hero-title {
      font-size: 2rem;
    }

    .hero-stats {
      gap: 1rem;
    }

    .stat-number {
      font-size: 1.5rem;
    }

    .search-title {
      font-size: 1.5rem;
    }

    .jobs-grid {
      grid-template-columns: 1fr;
    }

    .results-header {
      flex-direction: column;
      align-items: flex-start;
    }
  }

  /* ===== CUSTOM PAGINATOR ===== */
  :host ::ng-deep .custom-paginator {
    border: none;
    background: transparent;
  }

  :host ::ng-deep .custom-paginator .p-paginator-pages .p-paginator-page {
    color: var(--primary-blue);
    border-radius: 0.5rem;
  }

  :host ::ng-deep .custom-paginator .p-paginator-pages .p-paginator-page.p-highlight {
    background: var(--primary-blue);
    color: white;
  }

  :host ::ng-deep .custom-paginator .p-paginator-prev,
  :host ::ng-deep .custom-paginator .p-paginator-next {
    color: var(--primary-blue);
    border-radius: 0.5rem;
  }

  /* ===== FORM STYLES (EXISTING) ===== */
  .apply-form .row { display: flex; gap: 1rem; margin-bottom: 1rem; align-items: center; flex-wrap: wrap; }
  .apply-form .row.two > .field { flex: 1 1 0; min-width: 220px; }
  .apply-form .field { display: flex; flex-direction: column; gap: .35rem; flex: 1 1 100%; }
  .apply-form .footer { display:flex; justify-content:flex-end; gap:.5rem; margin-top:.5rem; }
  .muted { color:#6b7280; font-size:.85rem; }

  .offer-html p { margin: .5rem 0; line-height: 1.6; }
  .offer-html ul, .offer-html ol { margin: .5rem 1.25rem; }
  .offer-html h1, .offer-html h2, .offer-html h3 { margin: .75rem 0 .25rem; }
  .details-footer { position: sticky; bottom: 0; padding-top: 1rem; background: #fff; display: flex; justify-content: flex-end; }

  .hero-picture,
.hero-img {
  width: 100%;
  height: 100%;
  display: block;
}

.hero-img {
  object-fit: cover;
  object-position: center;
  /* léger filtre pour que le texte reste lisible */
  filter: saturate(1.05);
}

/* Si tu veux garder la même classe qu'avant pour la taille */
.placeholder-image { display: none; } /* on masque l'ancien SVG si du cache traîne */

</style>